# Website Monitor System

## ç³»çµ±æ¦‚è¿°

Website Monitor System æ˜¯ä¸€å€‹åŸºæ–¼ Docker çš„ç¶²ç«™ç›£æ§ç³»çµ±ï¼Œèƒ½å¤ ç›£æ§å¤šé” 500 å€‹ç¶²ç«™ï¼Œæ”¯æ´ HTTP/HTTPS/DNS/SSL ç›£æ§ï¼Œä¸¦æä¾›è±å¯Œçš„è¦–è¦ºåŒ–åŠŸèƒ½ã€‚

## ç³»çµ±æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Nginx Proxy   â”‚â”€â”€â”€â–¶â”‚  React Frontend â”‚â”€â”€â”€â–¶â”‚  Express API    â”‚
â”‚   (Port 80/443) â”‚    â”‚  (Port 3000)    â”‚    â”‚  (Port 3001)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                       â”‚
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚     Grafana     â”‚    â”‚    InfluxDB     â”‚
                       â”‚   (Port 3000)   â”‚â—€â”€â”€â”€â”‚   (Port 8086)   â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ ¸å¿ƒåŠŸèƒ½

### ğŸŒ ç¶²ç«™ç›£æ§
- æ”¯æ´ HTTP/HTTPS å”è­°ç›£æ§
- DNS æŸ¥è©¢æ™‚é–“æ¸¬é‡
- SSL æ†‘è­‰åˆ°æœŸæª¢æŸ¥
- è‡ªè¨‚ç›£æ§é–“éš”ï¼ˆ30ç§’ - 1å°æ™‚ï¼‰
- å…§å®¹é—œéµå­—æª¢æŸ¥
- å¯è‡ªè¨‚æ­£å¸¸ç‹€æ…‹ç¢¼ç¯„åœ

### ğŸ“Š ç›£æ§æŒ‡æ¨™
- **response_time**: ç¶²ç«™å›æ‡‰æ™‚é–“ (ms)
- **status_code**: HTTP ç‹€æ…‹ç¢¼
- **dns_time**: DNS æŸ¥è©¢æ™‚é–“ (ms)
- **transfer_rate**: å‚³è¼¸é€Ÿç‡ (kbps)
- **ssl_expiry_days**: SSL æ†‘è­‰å‰©é¤˜å¤©æ•¸
- **is_healthy**: å¥åº·ç‹€æ…‹ (boolean)

### ğŸ“ˆ è³‡æ–™è¦–è¦ºåŒ–
- **React å‰ç«¯**: éŸ¿æ‡‰å¼ç®¡ç†ä»‹é¢
- **Recharts åœ–è¡¨**: æ­·å²æ•¸æ“šåœ–è¡¨ (1h/6h/12h/24h/1w/1m)
- **Grafana å„€è¡¨æ¿**: å°ˆæ¥­ç›£æ§é¢æ¿
- **å³æ™‚æ›´æ–°**: 30ç§’è‡ªå‹•åˆ·æ–°

### ğŸ’¾ è³‡æ–™å„²å­˜
- **InfluxDB**: æ™‚é–“åºåˆ—æ•¸æ“šåº«
- **JSON æª”æ¡ˆ**: ç¶²ç«™é…ç½®å­˜å„²
- **è‡ªå‹•å‚™ä»½**: Docker Volume æŒä¹…åŒ–

## å¿«é€Ÿé–‹å§‹

### ç³»çµ±éœ€æ±‚

- Docker >= 20.0
- Docker Compose >= 2.0
- 2GB å¯ç”¨è¨˜æ†¶é«”
- 1GB å¯ç”¨ç£ç¢Ÿç©ºé–“

### å®‰è£æ­¥é©Ÿ

1. **è¤‡è£½å°ˆæ¡ˆ**
   ```bash
   git clone <repository-url>
   cd website-monitor-system
   ```

2. **è¨­å®šç’°å¢ƒè®Šæ•¸**
   ```bash
   cp .env.example .env
   # ç·¨è¼¯ .env æª”æ¡ˆè¨­å®šä¸»æ©Ÿ IP
   ```

3. **å•Ÿå‹•ç³»çµ±**
   ```bash
   ./start.sh
   ```

4. **è¨ªå•æœå‹™**
   - å‰ç«¯ç®¡ç†ä»‹é¢: http://localhost
   - Grafana å„€è¡¨æ¿: http://localhost/grafana (admin/admin)
   - API æ–‡æª”: http://localhost/api/health

### ç®¡ç†è…³æœ¬

```bash
./start.sh   # å•Ÿå‹•æ‰€æœ‰æœå‹™
./stop.sh    # åœæ­¢æ‰€æœ‰æœå‹™
./status.sh  # æª¢æŸ¥ç³»çµ±ç‹€æ…‹
./logs.sh    # æŸ¥çœ‹ç³»çµ±æ—¥èªŒ
./logs.sh backend  # æŸ¥çœ‹ç‰¹å®šæœå‹™æ—¥èªŒ
```

## ä½¿ç”¨èªªæ˜

### æ–°å¢ç›£æ§ç¶²ç«™

1. è¨ªå• http://localhost
2. é»æ“Šã€Œæ–°å¢ç¶²ç«™ã€
3. å¡«å¯«ç¶²ç«™è³‡è¨Šï¼š
   - **URL**: å®Œæ•´ç¶²å€ (https://example.com)
   - **åç¨±**: è­˜åˆ¥åç¨±
   - **ç›£æ§é–“éš”**: 30ç§’-1å°æ™‚
   - **é—œéµå­—**: å…§å®¹æª¢æŸ¥é—œéµå­—ï¼ˆé¸å¡«ï¼‰
   - **ç‹€æ…‹ç¢¼ç¯„åœ**: æ­£å¸¸ç‹€æ…‹ç¢¼ç¯„åœ

### æŸ¥çœ‹ç›£æ§å ±è¡¨

1. **å‰ç«¯åœ–è¡¨**:
   - é€²å…¥ç¶²ç«™è©³æƒ…é é¢
   - åˆ‡æ›æ™‚é–“ç¯„åœ (1h/6h/12h/24h/1w/1m)
   - æŸ¥çœ‹å›æ‡‰æ™‚é–“ã€DNSæ™‚é–“ã€å‚³è¼¸é€Ÿç‡åœ–è¡¨

2. **Grafana å„€è¡¨æ¿**:
   - è¨ªå• http://localhost/grafana
   - ä½¿ç”¨ admin/admin ç™»å…¥
   - æŸ¥çœ‹é è¨­å„€è¡¨æ¿

## API æ–‡æª”

### ç¶²ç«™ç®¡ç† API

```
GET    /api/websites           # å–å¾—æ‰€æœ‰ç¶²ç«™
GET    /api/websites/:id       # å–å¾—å–®ä¸€ç¶²ç«™
POST   /api/websites           # æ–°å¢ç¶²ç«™
PUT    /api/websites/:id       # æ›´æ–°ç¶²ç«™
DELETE /api/websites/:id       # åˆªé™¤ç¶²ç«™
GET    /api/websites/stats/overview  # å–å¾—çµ±è¨ˆæ¦‚è¦½
```

### ç›£æ§æŒ‡æ¨™ API

```
GET    /api/metrics/:id                    # å–å¾—ç›£æ§æŒ‡æ¨™
GET    /api/metrics/:id/latest             # å–å¾—æœ€æ–°æŒ‡æ¨™
GET    /api/metrics/:id/stats              # å–å¾—çµ±è¨ˆè³‡æ–™
```

### è«‹æ±‚ç¯„ä¾‹

```bash
# æ–°å¢ç¶²ç«™
curl -X POST http://localhost/api/websites \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://example.com",
    "name": "ç¯„ä¾‹ç¶²ç«™",
    "interval": 60,
    "keyword": "Example",
    "statusCodeRange": {"min": 200, "max": 299}
  }'

# å–å¾—ç›£æ§æ•¸æ“š
curl "http://localhost/api/metrics/website-id?range=1h"
```

## é…ç½®èªªæ˜

### ç’°å¢ƒè®Šæ•¸

| è®Šæ•¸å | èªªæ˜ | é è¨­å€¼ |
|--------|------|--------|
| HOST_IP | ä¸»æ©Ÿ IP ä½å€ | http://localhost |
| INFLUXDB_TOKEN | InfluxDB å­˜å–æ¬Šæ– | mytoken |
| INFLUXDB_ORG | InfluxDB çµ„ç¹”åç¨± | myorg |
| INFLUXDB_BUCKET | InfluxDB å„²å­˜æ¡¶ | website-monitor |

### Docker ç¶²è·¯

ç³»çµ±ä½¿ç”¨è‡ªè¨‚ç¶²è·¯ `172.20.0.0/16`ï¼Œç¢ºä¿æœå‹™é–“é€šè¨Šéš”é›¢ã€‚

### è³‡æ–™æŒä¹…åŒ–

ä»¥ä¸‹è³‡æ–™æœƒæŒä¹…åŒ–å„²å­˜ï¼š
- InfluxDB æ™‚é–“åºåˆ—è³‡æ–™
- Grafana è¨­å®šèˆ‡å„€è¡¨æ¿
- ç¶²ç«™é…ç½® JSON æª”æ¡ˆ

## æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

1. **æœå‹™ç„¡æ³•å•Ÿå‹•**
   ```bash
   # æª¢æŸ¥ Docker ç‹€æ…‹
   docker info
   
   # é‡æ–°å»ºç½®
   docker-compose up --build --force-recreate
   ```

2. **å‰ç«¯ç„¡æ³•è¼‰å…¥**
   ```bash
   # æª¢æŸ¥ Nginx é…ç½®
   docker-compose logs nginx
   
   # æª¢æŸ¥å‰ç«¯æœå‹™
   docker-compose logs frontend
   ```

3. **ç›£æ§æ•¸æ“šç¼ºå¤±**
   ```bash
   # æª¢æŸ¥å¾Œç«¯æœå‹™
   docker-compose logs backend
   
   # æª¢æŸ¥ InfluxDB é€£ç·š
   docker-compose logs influxdb
   ```

4. **Grafana ç„¡æ³•è¨ªå•**
   ```bash
   # é‡ç½® Grafana å¯†ç¢¼
   docker-compose exec grafana grafana-cli admin reset-admin-password admin
   ```

### æ—¥èªŒæª¢æŸ¥

```bash
# æŸ¥çœ‹æ‰€æœ‰æœå‹™æ—¥èªŒ
./logs.sh

# æŸ¥çœ‹ç‰¹å®šæœå‹™æ—¥èªŒ
./logs.sh backend
./logs.sh frontend  
./logs.sh grafana
./logs.sh influxdb
./logs.sh nginx
```

### æ•ˆèƒ½èª¿å„ª

1. **è¨˜æ†¶é«”ä½¿ç”¨**
   - é è¨­é…ç½®é©ç”¨æ–¼ç›£æ§ 500 å€‹ç¶²ç«™
   - å¯èª¿æ•´ç›£æ§é–“éš”ä»¥æ¸›å°‘è³‡æºä½¿ç”¨

2. **ç£ç¢Ÿç©ºé–“**
   - InfluxDB æœƒå®šæœŸæ¸…ç†èˆŠæ•¸æ“š
   - å»ºè­°å®šæœŸå‚™ä»½é‡è¦æ•¸æ“š

3. **ç¶²è·¯é »å¯¬**
   - ç›£æ§é–“éš”å½±éŸ¿ç¶²è·¯ä½¿ç”¨é‡
   - å¯ä¾éœ€æ±‚èª¿æ•´é–“éš”æ™‚é–“

## é–‹ç™¼æŒ‡å—

### å°ˆæ¡ˆçµæ§‹

```
website-monitor-system/
â”œâ”€â”€ docker-compose.yml           # Docker æœå‹™å®šç¾©
â”œâ”€â”€ .env                        # ç’°å¢ƒè®Šæ•¸
â”œâ”€â”€ start.sh / stop.sh          # ç®¡ç†è…³æœ¬
â”œâ”€â”€ frontend/                   # React å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/         # UI å…ƒä»¶
â”‚   â”‚   â”œâ”€â”€ pages/             # é é¢å…ƒä»¶  
â”‚   â”‚   â”œâ”€â”€ services/          # API æœå‹™
â”‚   â”‚   â””â”€â”€ utils/             # å·¥å…·å‡½æ•¸
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ backend/                    # Express å¾Œç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ routes/            # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ services/          # æ¥­å‹™é‚è¼¯
â”‚   â”‚   â”œâ”€â”€ models/            # è³‡æ–™æ¨¡å‹
â”‚   â”‚   â””â”€â”€ utils/             # å·¥å…·å‡½æ•¸
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ nginx/                      # åå‘ä»£ç†
â”‚   â””â”€â”€ nginx.conf
â””â”€â”€ grafana/                    # Grafana é…ç½®
    â”œâ”€â”€ provisioning/
    â””â”€â”€ dashboards/
```

### é–‹ç™¼ç’°å¢ƒ

```bash
# å‰ç«¯é–‹ç™¼
cd frontend
npm install
npm start

# å¾Œç«¯é–‹ç™¼  
cd backend
npm install
npm run dev
```

### å»ºç½®éƒ¨ç½²

```bash
# å»ºç½®ç”Ÿç”¢ç‰ˆæœ¬
docker-compose -f docker-compose.yml -f docker-compose.prod.yml up --build

# æ¨é€è‡³å®¹å™¨å€‰åº«
docker-compose push
```

## æˆæ¬Šèˆ‡æ”¯æ´

- **ç‰ˆæœ¬**: v1.0.0
- **ä½œè€…**: System Engineer
- **æˆæ¬Š**: MIT License
- **æ”¯æ´**: è«‹æäº¤ Issue æˆ– Pull Request

## æ›´æ–°æ—¥èªŒ

### v1.0.0 (2025-09-01)

#### âœ¨ æ–°åŠŸèƒ½
- å®Œæ•´çš„ç¶²ç«™ç›£æ§ç³»çµ±
- React + MUI å‰ç«¯ä»‹é¢
- Express.js API å¾Œç«¯
- InfluxDB æ™‚é–“åºåˆ—è³‡æ–™åº«
- Grafana è¦–è¦ºåŒ–å„€è¡¨æ¿
- Docker å®¹å™¨åŒ–éƒ¨ç½²
- Nginx åå‘ä»£ç†
- SSL æ†‘è­‰ç›£æ§
- DNS æŸ¥è©¢æ™‚é–“æ¸¬é‡
- è‡ªè¨‚ç›£æ§é–“éš”èˆ‡åƒæ•¸

#### ğŸ”§ æŠ€è¡“ç‰¹é»
- Tailwind CSS + Inter å­—é«”è¨­è¨ˆç³»çµ±
- Recharts åœ–è¡¨å…ƒä»¶
- éŸ¿æ‡‰å¼ RWD è¨­è¨ˆ
- RESTful API æ¶æ§‹
- å®¹å™¨ç¶²è·¯éš”é›¢
- è³‡æ–™æŒä¹…åŒ–å„²å­˜

#### ğŸ“¦ éƒ¨ç½²åŠŸèƒ½
- ä¸€éµå•Ÿå‹•è…³æœ¬
- å¥åº·æª¢æŸ¥æ©Ÿåˆ¶
- è‡ªå‹•é‡å•Ÿç­–ç•¥
- æ—¥èªŒç®¡ç†å·¥å…·
- ç³»çµ±ç‹€æ…‹ç›£æ§