# 優化 24 小時圖表資料密度

## 發布日期
2025-09-17 11:20

## 版本
v1.0.11-patch

## 修復內容

### 問題描述
- 24 小時圖表資料點密度太低，只有 18 個點
- 使用者反映圖表顯示過於稀疏
- 原始資料約 267 筆，聚合後只剩 18 筆

### 解決方案

#### 調整聚合策略
修改 `backend/src/services/InfluxService.js` 的聚合配置：
- **之前**：24h 每 15 筆聚合一次（約 18 個點）
- **之後**：24h 每 6 筆聚合一次（約 45 個點）

```javascript
// 修改前
'24h': 15,  // 約 18 個點

// 修改後
'24h': 6,   // 約 45 個點，每30分鐘一個資料點
```

## 技術細節

### 修改檔案
- `backend/src/services/InfluxService.js`
  - 第 179 行：將 24h 聚合間隔從 15 改為 6

### 資料密度對比
- **修改前**：267 筆原始資料 → 18 個資料點（密度 6.7%）
- **修改後**：267 筆原始資料 → 45 個資料點（密度 16.9%）

## 測試結果
- ✅ 24 小時圖表現在顯示 45 個資料點
- ✅ 資料密度提升 150%（從 18 點增加到 45 點）
- ✅ 圖表視覺效果更加平滑連續
- ✅ 每 30 分鐘一個資料點，符合使用者預期

## 影響範圍
- 改善 24 小時監控圖表的視覺呈現
- 提升資料點密度，讓趨勢更明顯
- 不影響其他時間範圍的聚合策略