# 修復圖表 X 軸時間標籤重疊問題

## 發布日期
2025-09-17 11:03

## 版本
v1.0.10-patch

## 修復內容

### 問題描述
- 24小時時間範圍的回應時間組成分析圖表 X 軸標籤重疊
- 時間標籤格式太長（MM/dd HH:mm）導致擁擠
- 標籤間隔不當，所有資料點都顯示標籤

### 解決方案

#### 1. 優化時間格式
調整不同時間範圍的顯示格式：
- **1-6小時**：HH:mm（時:分）
- **12-24小時**：HH:mm（只顯示時:分，避免擁擠）
- **2天**：MM/dd HH時（月/日 時）
- **7天以上**：MM/dd（月/日）

#### 2. 動態標籤間隔
新增 `getLabelInterval()` 函數，根據時間範圍智能調整：
- **1小時**：顯示約6個標籤
- **3-6小時**：顯示約8個標籤
- **12-24小時**：顯示約12個標籤
- **7-14天**：顯示約7個標籤
- **30-90天**：顯示約10個標籤

#### 3. 圖表組件優化
修改 StackedAreaChart 的 X 軸間隔設定為 `preserveStartEnd`，保留起始和結束標籤，中間自動調整。

## 技術細節

### 修改檔案
- `frontend/src/pages/WebsiteDetail.js`
  - 簡化 24 小時時間格式為 HH:mm
  - 新增 getLabelInterval() 動態計算間隔
  - 改進標籤顯示邏輯

- `frontend/src/components/StackedAreaChart.js`
  - 調整 getXAxisInterval() 返回值
  - 使用 preserveStartEnd 策略

### 優化效果
```javascript
// 之前：每個資料點都顯示 "09/17 10:30"
// 之後：間隔顯示 "10:00", "11:00", "12:00"...
```

## 測試結果
- ✅ 24小時圖表標籤不再重疊
- ✅ 標籤間隔合理，約12個時間點
- ✅ 時間格式簡潔清晰
- ✅ 不同時間範圍都有適當的顯示密度

## 影響範圍
- 所有使用 StackedAreaChart 的頁面
- 改善圖表可讀性
- 提升使用者體驗